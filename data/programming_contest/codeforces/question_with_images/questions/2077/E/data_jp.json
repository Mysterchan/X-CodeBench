{
    "Title": "Codeforces Round 1008 (Div. 1)",
    "Source": "codeforces",
    "Name": "Another Folding Strip",
    "Time Limit": "2 s",
    "Memory Limit": "256 mb",
    "Problem Statement": "配列 $b$ の長さ $m$ に対して、$f(b)$ を次のように定義します。\nすべてのセルが初めに暗さ $0$ の $1 \\times m$ のストリップを考えます。位置 $i$ の色が暗さ $b_i$ になるようにストリップを変形させたいです。以下の操作を行うことができます。この操作は二つのステップから構成されます。- 二つのセルの間の任意のラインで紙を折ります。何度でも折ってもよいし、折らない選択をしてもかまいません。- 一つの位置を選んで黒い染料を落とします。染料は上から浸透し、下に流れ、経路上のすべてのセルの暗さを $1$ 増加させます。染料を落とした後、ストリップを元に戻します。\n$f(b)$ を、目的の構成を達成するために必要な最小の操作回数と定義します。目標は常に有限の操作回数で達成できることが証明できます。\nあなたには長さ $n$ の配列 $a$ が与えられます。\n$\\sum_{l=1}^n\\sum_{r=l}^n f(a_l a_{l+1} ... a_r)$\nを $998\\,244\\,353$ で割った余りを評価してください。",
    "Statement Images": [],
    "Constraints": "Time limit: 2 s\nMemory limit: 256 mb",
    "IO Styles": "\"入力\n各テストは複数のテストケースを含む。最初の行にはテストケースの数 $t$ ($1 ≤ t ≤ 10^4$) が含まれる。テストケースの説明が続く。\n各テストケースの最初の行には整数 $n$ ($1 ≤ n ≤ 2 \\cdot 10^5$) が含まれ、これは配列 $a$ の長さを表す。\n2行目には $n$ 個の整数 $a_1, a_2, ..., a_n$ ($0 ≤ a_i ≤ 10^9$) が含まれ、これは配列 $a$ を表す。\n全てのテストケースにわたる $n$ の値の合計が $2 \\cdot 10^5$ を超えないことが保証されている。\n出力\n各テストケースについて、必要な合計を $998\\,244\\,353$ で割った余りとして出力せよ。\"",
    "Sample Detail": [
        {
            "input": "4\n3\n0 1 0\n6\n1 0 0 1 2 1\n5\n2 1 2 4 3\n12\n76 55 12 32 11 45 9 63 88 83 32 6",
            "output": "4\n28\n47\n7001",
            "explanation": "",
            "images": []
        }
    ],
    "Notes": "注意\n最初のテストケースでは、- $f(a_1)=f(\\mathtt{0})=0$ - $f(a_1a_2)=f(\\mathtt{01})=1$ - $f(a_1a_2a_3)=f(\\mathtt{010})=1$ - $f(a_2)=f(\\mathtt{1})=1$ - $f(a_2a_3)=f(\\mathtt{10})=1$ - $f(a_3)=f(\\mathtt{0})=0$ \nこれらを合計すると $0+1+1+1+1+0 = 4$ になります。\n2番目のテストケースでは、$f(a_1a_2a_3a_4a_5a_6) = 2$ です。これは可能な操作の一つのシーケンスです。 ![image](1.png)",
    "Note Images": [
        "https://espresso.codeforces.com/7e858937391c04751be3558a4470a2f30d2bd683.png"
    ],
    "Language": "jp"
}