{
    "Title": "鹿島建設プログラミングコンテスト2025（AtCoder Beginner Contest 394）",
    "Source": "atcoder",
    "Name": "Palindromic Shortest Path",
    "Time Limit": "2 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "N 頂点の有向グラフがあり、頂点には 1, 2, ..., N の番号が付いています。\n辺の情報は N^2 個の文字 C_{1, 1}, C_{1, 2}, ..., C_{1, N}, C_{2, 1}, ..., C_{N, N} によって与えられます。ここで、C_{i, j} は英小文字あるいは - です。\nC_{i, j} が英小文字のとき頂点 i から頂点 j へ向かう辺がちょうど 1 つ存在してラベル C_{i, j} が付いており、C_{i, j} が - のとき頂点 i から頂点 j へ向かう辺は存在しません。\n1 ≤ i, j ≤ N を満たす各整数組 (i, j) について、以下の問題に対する答えを求めてください。\n- 頂点 i から頂点 j に向かう（単純とは限らない）パスのうち、辺に付けられたラベルの文字を順に結合した文字列が回文となるようなものの中で最も短いものの長さを求めよ。ただし、そのようなパスがない場合は答えは -1 とせよ。",
    "Statement Images": [],
    "Constraints": "- 1 ≤ N ≤ 100\n- N は整数\n- C_{i, j} は英小文字あるいは -",
    "IO Styles": "入力\n入力は以下の形式で標準入力から与えられる。\nN\r\nC_{1, 1}C_{1, 2}...C_{1, N}\r\nC_{2, 1}C_{2, 2}...C_{2, N}\r\n\\vdots\r\nC_{N, 1}C_{N, 2}...$C_{N, N}\r\n出力\n整数組 (i, j) に対する答えを A_{i, j} として以下の形式で出力せよ。\nA_{1, 1} A_{1, 2} ... A_{1, N}\r\nA_{2, 1} A_{2, 2} ... A_{2, N}\r\n\\vdots\r\nA_{N, 1} A_{N, 2} ... A_{N, N}$",
    "Sample Detail": [
        {
            "input": "4\nab--\n--b-\n---a\nc---\n",
            "output": "0 1 2 4\n-1 0 1 -1\n3 -1 0 1\n1 -1 -1 0\n",
            "explanation": "例として (i, j) = (1, 4) の場合について説明します。\n\n頂点 1 \\to 1 \\to 2 \\to 3 \\to 4 というパスにおける辺に付けられた文字のラベルを順に結合すると文字列 abba が得られます。これは回文であり、頂点 1 から頂点 4 へ向かう長さ 3 以下のパスであって辺に付けられたラベルの文字を順に結合した文字列が回文となるものは存在しないため (i, j) = (1, 4) に対する答えは 4 となります。 \n\n空文字列も回文であることに注意してください。",
            "images": []
        },
        {
            "input": "5\nus---\n-st--\n--s--\nu--s-\n---ts\n",
            "output": "0 1 3 -1 -1\n-1 0 1 -1 -1\n-1 -1 0 -1 -1\n1 3 -1 0 -1\n-1 -1 5 1 0\n",
            "explanation": "",
            "images": []
        }
    ],
    "Language": "jp"
}