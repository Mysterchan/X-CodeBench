{
    "Title": "鹿島建設プログラミングコンテスト2025（AtCoder Beginner Contest 394）",
    "Source": "atcoder",
    "Name": "Dense Buildings",
    "Time Limit": "5 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "東西南北方向に H\\times W 個の区画に区切られた街があり、各区画にはちょうど 1 つのビルが立っています。\n具体的には北から i 番目 (1≤ i≤ H) かつ西から j 番目 (1≤ j≤ W) の区画（以下、区画 (i,j) とよぶ）には F_{i,j} 階建てのビルがあります。\n高橋君には 2 種類の移動方法があり、区画 (i,j) のビルの X 階 (1≤ X≤ F_{i,j}) にいるとき、そこから次のような移動が可能です。\n- 同じビルの中の 1 つ上の階または 1 つ下の階へ 階段 を使って移動する。ただし、1 階から 1 つ下の階への移動および、F_{i,j} 階から 1 つ上の階への移動はできない。\n- 東西南北に隣接する区画にあるビルのうち、 X 階建て以上であるものを 1 つを選び、そのビルの X 階へ （上空）通路 を使って移動する。\nただし、区画 (i,j) と区画 (i',j') が東西南北に隣接するとは、\\lvert i-i'\\rvert+\\lvert j-j'\\rvert=1 であることをさします。\nQ 個の質問が与えられるので、それぞれの質問に答えてください。i 個目 (1≤ i≤ Q) の質問は次のようなものです。\n区画 (A_i,B_i) にあるビルの Y_i 階から、区画 (C_i,D_i) にあるビルの Z_i 階へ高橋君が移動する時に、\n階段 を使う回数としてあり得る最小の値を求めよ。\nここで、階段を使う回数は 1 つ上の階または 1 つ下の階へ移動するたびにカウントされ、同じビルの中でも重複してカウントされるものとする。\n(例えば、あるビルを 1 階から 6 階まで移動したとき、5 回階段を使用したと数える。)\nまた、通路の使用回数を最小とする必要はないことに注意せよ。",
    "Statement Images": [],
    "Constraints": "- 1≤ H ≤ 500\n- 1≤ W ≤ 500\n- 1≤ F_{i,j} ≤ 10^6\n- 1≤ Q≤ 2\\times 10^5\n- 1≤ A_i,C_i≤ H\n- 1≤ B_i,D_i≤ W\n- 1≤ Y_i≤ F_{A_i,B_i}\n- 1≤ Z_i≤ F_{C_i,D_i}\n- (A_i,B_i,Y_i)\\neq (C_i,D_i,Z_i)\n- 入力はすべて整数",
    "IO Styles": "入力\n入力は以下の形式で標準入力から与えられる。\nH W\nF_{1,1} F_{1,2} ... F_{1,W}\nF_{2,1} F_{2,2} ... F_{2,W}\n\\vdots\nF_{H,1} F_{H,2} ... F_{H,W}\nQ\nA_1 B_1 Y_1 C_1 D_1 Z_1\nA_2 B_2 Y_2 C_2 D_2 Z_2\n\\vdots\nA_Q B_Q Y_Q C_Q D_Q Z_Q\n出力\nQ 行出力せよ。i 行目には i 番目の質問に対する答えを整数で出力せよ。",
    "Sample Detail": [
        {
            "input": "3 3\n12 10 6\n1 1 3\n8 6 7\n2\n1 1 10 3 1 6\n1 1 6 1 2 4\n",
            "output": "10\n2\n",
            "explanation": "1 番目の質問について、例えば以下のように移動すると階段を合計で 10 回使用して、\n区画 (1,1) のビルの 10 階から区画 (3,1) のビルの 6 階へ移動することができます。\n\n- 通路を使って、区画 (1,1) のビルの 10 階から区画 (1,2) のビルの 10 階へ移動する。\n- 階段を 4 回使って、区画 (1,2) のビルの 10 階から 6 階へ移動する。\n- 通路を使って、区画 (1,2) のビルの 6 階から区画 (1,3) のビルの 6 階へ移動する。\n- 階段を 3 回使って、区画 (1,3) のビルの 6 階から 3 階へ移動する。\n- 通路を使って、区画 (1,3) のビルの 3 階から区画 (2,3) のビルの 3 階へ移動する。\n- 通路を使って、区画 (2,3) のビルの 3 階から区画 (3,3) のビルの 3 階へ移動する。\n- 階段を 3 回使って、区画 (3,3) のビルの 3 階から 6 階へ移動する。\n- 通路を使って、区画 (3,3) のビルの 6 階から区画 (3,2) のビルの 6 階へ移動する。\n- 通路を使って、区画 (3,2) のビルの 6 階から区画 (3,1) のビルの 6 階へ移動する。\n\n\n階段の使用回数が 9 回以下となるように、区画 (1,1) のビルの 10 階から区画 (3,1) のビルの 6 階へ移動することはできないため、10 を出力します。\n\n2 番目の質問については、区画 (1,2) のビルへ通路を用いて移動した後に、階段を 2 回用いて 6 階から 4 階へ下りると、階段を 2 回使用することで、区画 (1,1) のビルの 6 階から区画 (1,2) のビルの 4 階へ移動することができます。",
            "images": []
        }
    ],
    "Language": "jp"
}