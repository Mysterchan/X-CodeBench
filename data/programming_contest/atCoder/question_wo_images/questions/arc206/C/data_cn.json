{
    "Title": "AtCoder Regular Contest 206 (Div. 2)",
    "Source": "atcoder",
    "Name": "Tree Sequence",
    "Time Limit": "2 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "一個長度為 N 的序列 B=(B_1,...,B_N)，其元素為介於 1 和 N 之間的整數（包含 1 和 N），當且僅當滿足以下條件時，稱為好序列：\n- 對於每一個區間 [l,r]（1≤ l ≤ r ≤ N），必存在一個整數 x（l≤ x≤ r），使得以下條件成立：\n- 準備一個有 N 個頂點（從 1 到 N 編號）且邊為零的圖。對於每個 l ≤ i ≤ r，如果 i ≠ x，則在頂點 i 和 B_i 之間添加一條邊。那麼，頂點 l, l+1,...,r 形成一棵樹。也就是說，頂點 l, l+1,...,r 是連通的。\n給定一個序列 A=(A_1,...,A_N)，其中每個元素要么是介於 1 和 N 之間的整數，要么是 -1。找出將 A 中的 -1 元素替換為介於 1 和 N 之間的整數的方式數，模 998244353，使得 A 成為一個好序列。",
    "Statement Images": [],
    "Constraints": "- 所有輸入值均為整數。\n- 1≤ N≤ 2\\times 10^5\n- 1≤ A_i≤ N 或 A_i=-1",
    "IO Styles": "輸入\n輸入是以以下格式從標準輸入給出：\nN \nA_1 \\cdots A_N\n\n輸出\n輸出將 -1 的元素替換為介於 1 和 N（含）之間的整數，使得 A 成為一個良好序列的方式數，結果對 998244353 取模。",
    "Sample Detail": [
        {
            "input": "3\n-1 -1 -1\n",
            "output": "7\n",
            "explanation": "滿足條件的替換有以下七個：\n\n- (1,1,2)\n- (2,1,2)\n- (2,2,2)\n- (2,3,1)\n- (2,3,2)\n- (2,3,3)\n- (3,1,2)\n\n例如，在 A=(1,1,2) 的情況下，可以通過設置 x=1 來確認區間 [1,2] 滿足條件，此時點 2 和 A_2=1 連接，而點 1 和 2 形成一棵樹。\n\n同樣，區間 [1,1]、[2,2]、[3,3]、[2,3]、[1,3] 也滿足條件，因此 (1,1,2) 是一個良好的序列。",
            "images": []
        },
        {
            "input": "3\n-1 3 -1\n",
            "output": "3\n",
            "explanation": "滿足條件的替代方案如下三個：\n\n- (2,3,1)\n- (2,3,2)\n- (2,3,3)",
            "images": []
        },
        {
            "input": "6\n2 3 -1 -1 -1 -1\n",
            "output": "21\n",
            "explanation": "",
            "images": []
        }
    ],
    "Language": "cn"
}