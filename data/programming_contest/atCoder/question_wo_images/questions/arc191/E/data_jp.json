{
    "Title": "AtCoder Regular Contest 191 (Div. 2)",
    "Source": "atcoder",
    "Name": "Unfair Game",
    "Time Limit": "2 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "正整数 N,X,Y と長さ N の非負整数列 A=(A_1,A_2,...,A_N), B=(B_1,B_2,...,B_N) が与えられます。\nN 個の袋があり、それぞれ袋 1 から袋 N までの番号が付けられています。袋 i にははじめ金貨が A_i 枚、銀貨が B_i 枚入っています。\nこの N 個の袋を使って高橋君と青木君がゲームをすることを考えます。最初に高橋君がいくつかの袋を取り（一つも取らなくても良い）、高橋君が取らなかった袋を全て青木君が取ります。その後、高橋君から始めて 2 人は交互に以下の操作を繰り返します。\n- 自分の持っている袋のうち金貨か銀貨が 1 枚以上入っている袋を選び、選んだ袋に対し以下の 2 つのうちいずれかを行う。\n- 金貨を 1 枚取り除き、銀貨を入れる。ただし、銀貨を入れる枚数は高橋君なら X 枚、青木君なら Y 枚である。この操作は金貨が選んだ袋に 1 枚以上ある場合にのみ行うことができる。\n- 銀貨を 1 枚取り除く。この操作は銀貨が選んだ袋に 1 枚以上ある場合にのみ行うことができる。\n- その後、選んだ袋を相手に渡す。\n先に操作ができなくなったプレイヤーが負けとなります。\n2 人が自分が勝つために最適な行動を取ったとき、高橋君が勝てるような最初の袋の取り方が何通りあるかを 998244353 で割ったあまりを求めてください。",
    "Statement Images": [],
    "Constraints": "- 1≤ N≤ 2\\times 10^5\n- 1≤ X,Y≤ 10^9\n- 0≤ A_i,B_i≤ 10^9\n- 入力される値は全て整数",
    "IO Styles": "入力\n入力は以下の形式で標準入力から与えられる。\nN X Y\nA_1 B_1\nA_2 B_2\n\\vdots\nA_N B_N\n出力\n2 人が自分が勝つために最適な行動をしたとしたとき、高橋君が勝てるような最初の袋の取り方が何通りあるかを 998244353 で割ったあまりを出力せよ。",
    "Sample Detail": [
        {
            "input": "2 1 1\n1 0\n1 1\n",
            "output": "2\n",
            "explanation": "高橋君が最初に袋 1,2 の両方を取った場合のゲームの進行の一例を示します。\n\n- 高橋君が袋 2 から金貨を 1 枚取り除き、銀貨を 1 枚入れる。その後、袋 2 を青木君に渡す。\n- 高橋君は金貨が 1 枚入った袋 1 を、青木君は銀貨が 2 枚入った袋 2 を持っている。\n\n\n- 青木君が袋 2 から銀貨を 1 枚取り除く。その後、袋 2 を高橋君に渡す。\n- 高橋君は金貨が 1 枚入った袋 1 と銀貨が 1 枚入った袋 2 を持っており、青木君は何も持っていない。\n\n\n- 高橋君が袋 1 から金貨を 1 枚取り除き、銀貨を 1 枚入れる。その後、袋 1 を青木君に渡す。\n- 高橋君は銀貨が 1 枚入った袋 2 を持っており、青木君は銀貨が 1 枚入った袋 1 を持っている。\n\n\n- 青木君が袋 1 から銀貨を 1 枚取り除く。その後、袋 1 を高橋君に渡す。\n- 高橋君は空の袋 1 と銀貨が 1 枚入った袋 2 を持っており、青木君は何も持っていない。\n\n\n- 高橋君が袋 2 から銀貨を 1 枚取り除く。その後、袋 2 を青木君に渡す。\n- 高橋君は空の袋 1 を持っており、青木君は空の袋 2 を持っている。\n\n\n- 青木君は操作ができないので、青木君の負けであり、高橋君の勝ちである。\n\n\n高橋君は最初に取る袋が袋 2 のみであるか袋 1,2 の両方である場合にこのゲームに勝つことができます。したがって、 2 を出力してください。",
            "images": []
        },
        {
            "input": "2 2 1\n1 2\n1 2\n",
            "output": "3\n",
            "explanation": "高橋君は最初に袋 1,2 のどちらか、または両方取った場合にこのゲームに勝つことができます。",
            "images": []
        },
        {
            "input": "5 8 3\n0 0\n0 0\n0 0\n0 0\n0 0\n",
            "output": "0\n",
            "explanation": "最初に高橋君がどのように袋を取っても高橋君は負けます。",
            "images": []
        },
        {
            "input": "7 2025 191\n1323 9953\n2763 3225\n2624 5938\n6718 2998\n3741 7040\n9837 1681\n8817 4471\n",
            "output": "40\n",
            "explanation": "",
            "images": []
        }
    ],
    "Language": "jp"
}