{
    "Title": "AtCoder Beginner Contest 395",
    "Source": "atcoder",
    "Name": "Pigeon Swap",
    "Time Limit": "2 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "Есть N голубей, пронумерованных от 1 до N, и N гнёзд, пронумерованных от 1 до N. Изначально голубь i (1 ≤ i ≤ N) находится в гнезде i. Вы выполните Q операций с этими голубями. Существует три типа операций:\n- Тип 1: Вам даны целые числа a и b (1 ≤ a ≤ N, 1 ≤ b ≤ N). Выньте голубя a из его текущего гнезда и переместите его в гнездо b.\n- Тип 2: Вам даны целые числа a и b (1 ≤ a < b ≤ N). Переместите всех голубей из гнезда a в гнездо b и переместите всех голубей из гнезда b в гнездо a. Эти два перемещения происходят одновременно.\n- Тип 3: Вам дано целое число a (1 ≤ a ≤ N). Голубь a сообщает метку гнезда, в котором он в настоящее время находится.\nВыведите результат каждой операции типа 3 в порядке, в котором они были даны.",
    "Statement Images": [],
    "Constraints": "- $1 ≤ N ≤ 10^6$\n- $1 ≤ Q ≤ 3 \\times 10^5$\n- Каждая операция имеет тип 1, 2 или 3.\n- Все операции являются допустимыми согласно условию задачи.\n- Существует хотя бы одна операция типа 3.\n- Все входные значения являются целыми числами.",
    "IO Styles": "Входные данные\nВходные данные предоставляются из стандартного ввода в следующем формате:\nN Q\nop _ 1\nop _ 2\n\\vdots\nop _ Q\nЗдесь op _ i в строке i+1 представляет собой i-ю операцию в одном из следующих форматов.\nЕсли i-я операция является операцией типа 1, то op _ i имеет следующий формат:\n1 a b\nЭто соответствует операции типа 1 с заданными целыми числами a и b.\nЕсли i-я операция является операцией типа 2, то op _ i имеет следующий формат:\n2 a b\nЭто соответствует операции типа 2 с заданными целыми числами a и b.\nЕсли i-я операция является операцией типа 3, то op _ i имеет следующий формат:\n3 a\nЭто соответствует операции типа 3 с заданным целым числом a.\nВыходные данные\nОбозначим количество операций типа 3 как q. Выведите q строк. i-я строка (1 ≤ i ≤ q) должна содержать наименьшее число, упомянутое в i-й операции типа 3.",
    "Sample Detail": [
        {
            "input": "6 8\n1 2 4\n1 3 6\n3 2\n2 4 5\n3 2\n1 4 2\n3 4\n3 2\n",
            "output": "4\n5\n2\n5\n",
            "explanation": "В указанных операциях голуби движутся, как показано на рисунке ниже:\n\n![image](1.png)\n\nНомера гнезд, которые необходимо указать для операций типа 3, это 4, 5, 2, 5. Выведите 4, 5, 2, 5 на отдельных строках.",
            "images": [
                "https://img.atcoder.jp/abc395/e82ad720223ef5e6d6cf8d1d51daa621.png"
            ]
        },
        {
            "input": "1 2\n1 1 1\n3 1\n",
            "output": "1\n",
            "explanation": "Назначение гнезда операции типа 1 может быть таким же, как и гнездо, в котором в данный момент находится голубь.",
            "images": []
        },
        {
            "input": "30 15\n3 3\n2 8 30\n2 12 15\n2 2 17\n1 19 1\n2 7 30\n3 12\n3 8\n2 25 26\n1 13 10\n1 16 10\n2 16 29\n2 1 21\n2 6 11\n1 21 8\n",
            "output": "3\n15\n7\n",
            "explanation": "",
            "images": []
        }
    ],
    "Language": "ru"
}