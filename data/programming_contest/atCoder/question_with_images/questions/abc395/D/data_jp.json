{
    "Title": "AtCoder Beginner Contest 395",
    "Source": "atcoder",
    "Name": "Pigeon Swap",
    "Time Limit": "2 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "鳩 1, 鳩 2,..., 鳩 N の N 羽の鳩と、巣 1, 巣 2,..., 巣 N の N 個の巣があります。\nはじめ、鳩 i (1≤ i≤ N) は巣 i にいます。\n鳩たちに対して Q 回の操作を行います。\n操作は次の 3 種類のうちのいずれかです。\n- 種類 1 : 整数 a,b (1≤ a≤ N,1≤ b≤ N) が与えられる。鳩 a を今いる巣から取り出し、巣 b へ移動する。\n- 種類 2 : 整数 a,b (1≤ a\\lt b≤ N) が与えられる。巣 a にいる鳩をすべて巣 b へ移動し、巣 b にいる鳩をすべて巣 a へ移動する。これら 2 つの移動は一斉に行われる。\n- 種類 3 : 整数 a (1≤ a≤ N) が与えられる。鳩 a が今いる巣の番号を報告する。\nQ 回の操作を順に行ったときの、種類 3 の各操作における報告の結果を出力してください。",
    "Statement Images": [],
    "Constraints": "- 1≤ N≤10 ^ 6\n- 1≤ Q≤3\\times10 ^ 5\n- 入力される操作はすべて種類 1, 種類 2, 種類 3 のいずれかである。\n- 入力される操作は問題文中の制約を満たす。\n- 入力される操作のうちに種類 3 の操作が 1 つ以上含まれる。\n- 入力はすべて整数",
    "IO Styles": "入力\n入力は以下の形式で標準入力から与えられる。\nN Q\r\nop _ 1\r\nop _ 2\r\n\\vdots\r\nop _ Q\r\nただし、i+1 行目の入力 op _ i は i 番目の操作を表しており、op _ i は次のいずれかの形式である。\ni 番目の操作が種類 1 の操作のとき、i+1 行目は次の形式で与えられる。\n1 a b\r\nこれは、与えられる整数を a と b として種類 1 の操作を行うことを表している。\ni 番目の操作が種類 2 の操作のとき、i+1 行目は次の形式で与えられる。\n2 a b\r\nこれは、与えられる整数を a と b として種類 2 の操作を行うことを表している。\ni 番目の操作が種類 3 の操作のとき、i+1 行目は次の形式で与えられる。\n3 a\r\nこれは、与えられる整数を a として種類 3 の操作を行うことを表している。\n出力\n与えられる種類 3 の操作の個数を q 個として、q 行にわたって出力せよ。\ni 行目 (1≤ i≤ q) には、種類 3 の操作のうち i 番目の操作で報告される巣の番号を出力せよ。",
    "Sample Detail": [
        {
            "input": "6 8\n1 2 4\n1 3 6\n3 2\n2 4 5\n3 2\n1 4 2\n3 4\n3 2\n",
            "output": "4\n5\n2\n5\n",
            "explanation": "与えられる操作で、鳩は以下の図のように移動します。\n\n![image](1.png)\n\n種類 3 の操作でそれぞれ報告すべき巣の番号は 4,5,2,5 なので、4 5 2 5 を 4 行にわたって出力してください。",
            "images": [
                "https://img.atcoder.jp/abc395/e82ad720223ef5e6d6cf8d1d51daa621.png"
            ]
        },
        {
            "input": "1 2\n1 1 1\n3 1\n",
            "output": "1\n",
            "explanation": "種類 1 の操作で、鳩を取り出した巣にそのまま戻す場合もあります。",
            "images": []
        },
        {
            "input": "30 15\n3 3\n2 8 30\n2 12 15\n2 2 17\n1 19 1\n2 7 30\n3 12\n3 8\n2 25 26\n1 13 10\n1 16 10\n2 16 29\n2 1 21\n2 6 11\n1 21 8\n",
            "output": "3\n15\n7\n",
            "explanation": "",
            "images": []
        }
    ],
    "Language": "jp"
}