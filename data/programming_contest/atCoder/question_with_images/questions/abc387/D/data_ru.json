{
    "Title": "AtCoder Beginner Contest 387",
    "Source": "atcoder",
    "Name": "Snaky Walk",
    "Time Limit": "2 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "Дано поле с H строками и W столбцами. \nПусть (i,j) обозначает ячейку в i-й строке сверху и j-й столбце слева. \nКаждая ячейка является одной из следующих: начальной ячейкой, целевой ячейкой, пустой ячейкой или ячейкой с препятствием. Эта информация описывается H строками S_1,S_2,\\dots,S_H, каждая из которых имеет длину W. В частности, ячейка (i,j) является начальной, если j-й символ S_i равен S, целевой, если он равен G, пустой, если он равен ., и ячейкой с препятствием, если он равен #. Гарантируется, что существует ровно одна начальная ячейка и ровно одна целевая ячейка. \nВы в настоящее время находитесь на начальной ячейке. \nВаша задача — добраться до целевой ячейки, перемещаясь в соседнюю ячейку, смежную по грани с той, в которой вы находитесь. \nТем не менее, вы не можете перемещаться на ячейку с препятствием или выходить за пределы поля, и вы должны чередовать вертикальные и горизонтальные движения каждый раз. (Направление первого движения можно выбрать произвольно.) \nОпределите, возможно ли достичь целевой ячейки. Если это возможно, найдите минимальное количество необходимых перемещений. \nБолее формально, проверьте, существует ли последовательность ячеек (i_1,j_1),(i_2,j_2),\\dots,(i_k,j_k), удовлетворяющая всем следующим условиям. Если такая последовательность существует, найдите минимальное значение k-1.\n- Для каждого 1 ≤ l ≤ k, верно, что 1 ≤ i_l ≤ H и 1 ≤ j_l ≤ W, и (i_l,j_l) не является ячейкой с препятствием.\n- (i_1,j_1) — начальная ячейка.\n- (i_k,j_k) — целевая ячейка.\n- Для каждого 1 ≤ l ≤ k-1, |i_l - i_{l+1}| + |j_l - j_{l+1}| = 1.\n- Для каждого 1 ≤ l ≤ k-2, если i_l ≠ i_{l+1}, то i_{l+1} = i_{l+2}. \n- Для каждого 1 ≤ l ≤ k-2, если j_l ≠ j_{l+1}, то j_{l+1} = j_{l+2}.",
    "Statement Images": [],
    "Constraints": "- 1 ≤ H, W ≤ 1000  \n- H и W — целые числа.  \n- Каждое S_i — это строка длиной W, состоящая из S, G, ., #.  \n- Существует ровно одна стартовая ячейка и ровно одна ячейка цели.",
    "IO Styles": "Входные данные\nВходные данные предоставляются из стандартного ввода в следующем формате:\nH W\nS_1\nS_2\n\\vdots\nS_H\nВыходные данные\nЕсли возможно достичь целевой ячейки, выведите минимальное количество ходов. В противном случае выведите -1.",
    "Sample Detail": [
        {
            "input": "3 5\n.S#.G\n.....\n.#...\n",
            "output": "7\n",
            "explanation": "![image](1.png)\n\nКак показано на левом рисунке, вы можете двигаться так: (1,2)→(2,2)→(2,3)→(3,3)→(3,4)→(2,4)→(2,5)→(1,5), достигнув целевой клетки за 7 ходов. \nСделать это за 6 ходов или менее невозможно, поэтому ответ — 7.\n\nОбратите внимание, что вы не можете двигаться по пути, который перемещается горизонтально (или вертикально) подряд без чередования, как показано на правом рисунке.",
            "images": [
                "https://img.atcoder.jp/abc387/6ef2f123adae6bc6bb157af8f30afe89.png"
            ]
        },
        {
            "input": "3 5\n..#.G\n.....\nS#...\n",
            "output": "-1\n",
            "explanation": "Невозможно достичь целевой клетки.",
            "images": []
        },
        {
            "input": "8 63\n...............................................................\n..S...#............................#####..#####..#####..####G..\n..#...#................................#..#...#......#..#......\n..#####..####...####..####..#..#...#####..#...#..#####..#####..\n..#...#..#..#...#..#..#..#..#..#...#......#...#..#..........#..\n..#...#..#####..####..####..####...#####..#####..#####..#####..\n................#.....#........#...............................\n................#.....#........#...............................\n",
            "output": "148\n",
            "explanation": "",
            "images": []
        }
    ],
    "Language": "ru"
}