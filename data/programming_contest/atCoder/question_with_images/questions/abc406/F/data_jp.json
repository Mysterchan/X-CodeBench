{
    "Title": "パナソニックグループ プログラミングコンテスト2025（AtCoder Beginner Contest 406）",
    "Source": "atcoder",
    "Name": "Compare Tree Weights",
    "Time Limit": "2 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "N 頂点の木 T があり、\n頂点および辺はそれぞれ頂点 1, 頂点 2, ..., 頂点 N、辺 1, 辺 2, ..., 辺 (N-1) と番号づけられています。\n特に、辺 i (1≤ i≤ N-1) は頂点 U_i と頂点 V_i を結んでいます。\nまた、各頂点には重みが定められており、最初、各頂点の重みはすべて 1 です。\nQ 個のクエリが与えられるので、順に処理してください。\n各クエリは次の 2 種類のいずれかです。\n- 1 x w : 頂点 x の重みを w 増加させる。 \n- 2 y : 辺 y を削除すると、T は 2 つの部分木（連結成分）に分かれる。それぞれの部分木に含まれる頂点の重みの総和をその部分木の重みとするとき、2 つの部分木の重みの差を出力する。\n2 種類目のクエリについて、T から任意の辺を 1 つ選んで削除したとき、T は必ず 2 つの部分木に分かれることが証明できます。\nまた、2 種類目のクエリでは、実際に辺を削除しているわけではないことに注意してください。",
    "Statement Images": [],
    "Constraints": "- 2≤ N≤ 3\\times 10^5\n- 1≤ U_i,V_i≤ N\n- 1≤ Q≤ 3\\times 10^5\n- 1≤ x≤ N\n- 1≤ w≤ 1000\n- 1≤ y≤ N-1\n- 入力はすべて整数\n- 与えられるグラフは木である。\n- 2 種類目のクエリが少なくとも 1 つ存在する。",
    "IO Styles": "入力\n入力は以下の形式で標準入力から与えられる。\nN\nU_1 V_1\nU_2 V_2\n\\vdots\nU_{N-1} V_{N-1}\nQ\n\\mathrm{query}_1\n\\mathrm{query}_2\n\\vdots\n\\mathrm{query}_Q\n各クエリ \\mathrm{query}_i (1≤ i≤ Q) は次の形式のいずれかで与えられる。\n1 x w\n2 y\n出力\n2 種類目のクエリの個数を K 個として、K 行出力せよ。i 行目 (1≤ i≤ K) には i 番目の 2 種類目のクエリに対する答えを出力せよ。",
    "Sample Detail": [
        {
            "input": "6\n1 2\n1 3\n2 4\n4 5\n4 6\n5\n2 1\n1 1 3\n2 1\n1 4 10\n2 5\n",
            "output": "2\n1\n17\n",
            "explanation": "木 T の構造、頂点番号の対応は下図左の通りです。最初、各頂点の重みはすべて 1 です。\n\n1 番目のクエリでは、辺 1 を削除することを考えます。\nこのとき、頂点 1 を含む部分木と頂点 2 を含む部分木に分かれます。\n頂点 1 を含む部分木の重みは 2、頂点 2 を含む部分木の重みは 4 であるため、その差の 2 を出力します。（下図右）\n\n![image](1.png)\n\n2 番目のクエリでは、頂点 1 の重みを 3 増加させます。\n\n3 番目のクエリでは、辺 1 を削除することを考えます。\n頂点 1 を含む部分木の重みは 5、頂点 2 を含む部分木の重みは 4 であるため、その差の 1 を出力します。（下図左）\n\n4 番目のクエリでは、頂点 4 の重みを 10 増加させます。\n\n5 番目のクエリでは、辺 5 を削除することを考えます。\nこのとき、頂点 4 を含む部分木と頂点 6 のみからなる部分木に分かれます。\n頂点 4 を含む部分木の重みは 18、頂点 6 のみからなる部分木の重みは 1 であるため、その差の 17 を出力します。（下図右）\n\n![image](2.png)\n\nよって、2 種類目のクエリの答えである 2,1,17 をこの順に改行区切りで出力します。",
            "images": [
                "https://img.atcoder.jp/abc406/6f17e951940c2460b3ae5fe8e6bddc52.png",
                "https://img.atcoder.jp/abc406/c5eacf2967bcc2b09866a0d8b83104c4.png"
            ]
        }
    ],
    "Language": "jp"
}