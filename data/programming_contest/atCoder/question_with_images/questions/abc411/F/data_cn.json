{
    "Title": "UNIQUE VISION Programming Contest 2025 Summer (AtCoder Beginner Contest 411)",
    "Source": "atcoder",
    "Name": "Contraction",
    "Time Limit": "4 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "給定一個無向圖 G_0，擁有 N 個頂點和 M 條邊。\nG_0 的頂點和邊分別編號為頂點 1, 2, ..., N 和邊 1, 2, ..., M，且邊 i (1≤ i≤ M) 連接頂點 U_i 和 V_i。\nTakahashi 有一個圖 G 以及 N 個編號為 1, 2, ..., N 的棋子。\n最初，G=G_0，且棋子 i (1≤ i≤ N) 被放置在圖 G 的頂點 i 上。\n他現在將按順序執行 Q 個操作。\n第 i 個操作 (1≤ i≤ Q) 給出一個整數 X_i，範圍在 1 到 M 之間，並執行以下操作：\n在 G 中，如果棋子 U_{X_i} 和 V_{X_i} 被放置在不同的頂點上，且它們之間存在一條邊 e（在 G 上），則通過合併該邊來創建一個圖 G'。\n在這種情況下，如果產生了自環，則將其移除；如果存在多重邊，則用簡單邊替換它們。\n然後，所有在 G 中由邊 e 連接的兩個頂點上放置的棋子，將被放置在 G' 中由 e 的合併所產生的新頂點上。\n在 G 中放置在其他頂點上的棋子，則放置在 G' 中對應的頂點上。\n最後，將這個生成的 G' 設定為新的 G。\n如果棋子 U_{X_i} 和 V_{X_i} 被放置在同一個頂點，或者它們所放置的頂點之間沒有邊連接，則不執行任何操作。\n對於每個操作 i=1,2,..., Q，輸出第 i 次操作後 G 中的邊數。\n邊合併\n連接頂點 u 和 v 的邊合併操作是將頂點 u 和 v 合併為一個頂點的操作。\n更精確地說，對於執行邊合併的圖 G 所得到的圖是指對 G 執行以下操作的結果：\n\n- 向 G 添加一個新頂點 w。\n- 對於 G 中除 u 和 v 以外的每個頂點 x，當且僅當至少存在一條連接 u 和 x 或連接 v 和 x 的邊時，添加一條連接 w 和 x 的邊。\n- 刪除頂點 u 和 v，並移除所有連接頂點 u 和 v 的邊，以及所有連接頂點 u 或頂點 v 與其他頂點的邊。",
    "Statement Images": [],
    "Constraints": "- 2≤ N≤ 3\\times 10^5\n- 1≤ M≤ 3\\times 10^5\n- 1≤ U_i<V_i≤ N\n- (U_i,V_i)\\neq (U_j,V_j) 若 i\\neq j。\n- 1≤ Q≤ 3\\times 10^5\n- 1≤ X_i≤ M\n- 所有輸入值均為整數。",
    "IO Styles": "輸入\n輸入是以以下格式從標準輸入給出：\nN M\nU_1 V_1\nU_2 V_2\n\\vdots\nU_M V_M\nQ\nX_1 X_2 ... X_Q\n輸出\n輸出 Q 行。\n在第 i 行 (1≤ i≤ Q)，輸出在第 i 次操作後圖 G 中的邊數。",
    "Sample Detail": [
        {
            "input": "7 7\n1 2\n1 3\n2 3\n1 4\n1 5\n2 5\n6 7\n5\n1 2 3 1 5\n",
            "output": "4\n3\n3\n3\n2\n",
            "explanation": "最初，G 如下圖所示。圈起來的數字代表具有這些編號的棋子。\n\n![image](1.png)\n\n在第一次操作中，我們收縮了放置棋子 1 和 2 的頂點之間的邊（下圖左側）。\n經過操作後，G 變為下圖右側所示，特別地，邊的數量為 4。\n請注意，自環已被刪除，多重邊已被替換為簡單邊。\n\n![image](2.png)\n\n在第二次操作中，我們收縮了放置棋子 1 和 3 的頂點之間的邊。\n經過操作後，G 變為下圖左側所示，邊的數量變為 3。\n在第三次操作中，由於棋子 2 和 3 放置在相同的頂點，G 仍然保持不變，邊的數量仍然是 3。\n在第四次操作中，由於棋子 1 和 2 也放置在相同的頂點，G 仍然保持不變，邊的數量仍然是 3。\n在第五次操作中，我們收縮了放置棋子 1 和 5 的頂點之間的邊。\n經過操作後，G 變為下圖右側所示，邊的數量變為 2。\n\n因此，按順序輸出 4,3,3,3,2，各數字間以換行分隔。",
            "images": [
                "https://img.atcoder.jp/abc411/9469e5c08fdb8fb3b5da9f88dc121dec.png",
                "https://img.atcoder.jp/abc411/412aba64d94291e89c051b3c547e4c29.png",
                "https://img.atcoder.jp/abc411/c176efe296aa93c69cfb48c793c8bb64.png"
            ]
        }
    ],
    "Language": "cn"
}