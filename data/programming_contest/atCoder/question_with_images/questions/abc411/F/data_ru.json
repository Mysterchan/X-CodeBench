{
    "Title": "UNIQUE VISION Programming Contest 2025 Summer (AtCoder Beginner Contest 411)",
    "Source": "atcoder",
    "Name": "Contraction",
    "Time Limit": "4 sec",
    "Memory Limit": "1024 MiB",
    "Problem Statement": "Вам дан неориентированный граф G_0 с N вершинами и M рёбрами. \nВершины и рёбра G_0 пронумерованы как вершины 1, 2, ..., N и рёбра 1, 2, ..., M соответственно, и \nребро i (1≤ i≤ M) соединяет вершины U_i и V_i. \nТакэhashи имеет граф G и N фишек, пронумерованных как фишки 1, 2, ..., N. \nИзначально G=G_0, и фишка i (1≤ i≤ N) размещена на вершине i графа G. \nТеперь он будет выполнять Q операций в заданном порядке. \ni-я операция (1≤ i≤ Q) предоставляет целое число X_i от 1 до M включительно и выполняет следующую операцию: \nВ графе G, если фишки U_{X_i} и V_{X_i} размещены на разных вершинах, и \nмежду ними существует ребро e (в G), создайте граф G' путём сжатия этого ребра. \nВ этом случае, если образуются петли, удалите их, а если существуют многорёбра, замените их на простые рёбра. \nЗатем все фишки, которые были размещены на двух вершинах, соединённых ребром e в G, размещаются на вновь созданной вершине в результате сжатия e в G'. \nФишки, которые были размещены на других вершинах в G, размещаются на соответствующих вершинах в G'. \nНаконец, установите получившийся G' как новый G. \nЕсли фишки U_{X_i} и V_{X_i} размещены на одной вершине, или если вершины, на которых они размещены, не соединены рёбер, ничего не делайте. \nДля каждой из операций i=1,2,..., Q выведите количество рёбер в G после i-й операции. \nСжатие ребра \nСжатие ребра, соединяющего вершины u и v, — это операция, которая объединяет вершины u и v в одну вершину. \nБолее точно, граф, полученный путём сжатия ребра в G, относится к результату выполнения следующих операций над G:\n\n- Добавьте новую вершину w в G.\n- Для каждой вершины x, отличной от u и v в G, если существует хотя бы одно ребро, соединяющее u и x, или ребро, соединяющее v и x, добавьте ребро, соединяющее w и x.\n- Удалите вершины u и v и удалите все рёбра, соединяющие вершины u и v, а также все рёбра, соединяющие вершину u или вершину v с другими вершинами.",
    "Statement Images": [],
    "Constraints": "- $2 ≤ N ≤ 3 \\times 10^5$\n- $1 ≤ M ≤ 3 \\times 10^5$\n- $1 ≤ U_i < V_i ≤ N$\n- $(U_i, V_i) \\neq (U_j, V_j)$ при $i \\neq j$\n- $1 ≤ Q ≤ 3 \\times 10^5$\n- $1 ≤ X_i ≤ M$\n- Все входные значения являются целыми числами.",
    "IO Styles": "Входные данные\nВходные данные предоставляется из стандартного ввода в следующем формате:\nN M\nU_1 V_1\nU_2 V_2\n\\vdots\nU_M V_M\nQ\nX_1 X_2 ... X_Q\nВыходные данные\nВыведите Q строк.\nВ i-й строке (1≤ i≤ Q) выведите количество рёбер в G после i-й операции.",
    "Sample Detail": [
        {
            "input": "7 7\n1 2\n1 3\n2 3\n1 4\n1 5\n2 5\n6 7\n5\n1 2 3 1 5\n",
            "output": "4\n3\n3\n3\n2\n",
            "explanation": "Сначала граф $G$ представлен, как показано на рисунке ниже. Окружённые числами представляют собой куски с этими номерами.\n\n![image](1.png)\n\nВ 1-й операции мы сжимаем ребро между вершинами, на которых размещены куски 1 и 2 (левый рисунок ниже).\nПосле операции граф $G$ становится таким, как показано на правом рисунке ниже, и в частности, количество рёбер составляет 4.\nОбратите внимание, что петли убраны, а многогранные рёбра заменены простыми рёбрами.\n\n![image](2.png)\n\nВо 2-й операции мы сжимаем ребро между вершинами, на которых размещены куски 1 и 3.\nПосле операции граф $G$ становится таким, как показано на левом рисунке ниже, и количество рёбер становится 3.\nВ 3-й операции, поскольку куски 2 и 3 размещены на одной вершине, граф $G$ остается без изменений, и количество рёбер остается 3.\nВ 4-й операции тоже, поскольку куски 1 и 2 размещены на одной вершине, граф $G$ остается без изменений, и количество рёбер остается 3.\nВ 5-й операции мы сжимаем ребро между вершинами, на которых размещены куски 1 и 5.\nПосле операции граф $G$ становится таким, как показано на правом рисунке ниже, и количество рёбер становится 2.\n\nТаким образом, выведите 4,3,3,3,2 в указанном порядке, разделяя цифры переводами строки.\n\n![image](3.png)",
            "images": [
                "https://img.atcoder.jp/abc411/9469e5c08fdb8fb3b5da9f88dc121dec.png",
                "https://img.atcoder.jp/abc411/412aba64d94291e89c051b3c547e4c29.png",
                "https://img.atcoder.jp/abc411/c176efe296aa93c69cfb48c793c8bb64.png"
            ]
        }
    ],
    "Language": "ru"
}