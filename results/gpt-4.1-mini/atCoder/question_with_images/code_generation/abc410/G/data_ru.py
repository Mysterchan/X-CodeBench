import sys
sys.setrecursionlimit(10**7)
input = sys.stdin.readline

N = int(input())
chords = []
for _ in range(N):
    a, b = map(int, input().split())
    if a > b:
        a, b = b, a
    chords.append((a, b))

# Задача сводится к следующему:
# 1) Выбрать максимальное по количеству множество непересекающихся хорд (максимальное независимое множество в графе пересечений).
#    Для хорд на круге это классическая задача: максимальное количество непересекающихся хорд — это задача о поиске максимального набора непересекающихся интервалов.
#    Но здесь интервалы "перекрываются" по кругу, и пересечение хорд определяется по условию:
#    Хорды (a,b) и (c,d) пересекаются, если a < c < b < d или c < a < d < b.
#
# 2) После выбора максимального множества непересекающихся хорд, мы можем добавить одну новую хорду.
#    Новая хорда может быть добавлена произвольно, чтобы максимизировать количество пересечений.
#
# Цель: максимизировать количество точек пересечения между хордами после операций.
#
# Анализ:
# - Максимальное количество непересекающихся хорд — это максимальное по мощности множество хорд, не пересекающихся.
# - Пусть M = размер максимального множества непересекающихся хорд.
# - После удаления остальных, у нас M хорд, которые не пересекаются между собой (пересечений 0).
# - Добавляем одну новую хорду.
# - Новая хорда может пересекать каждую из M хорд максимум один раз.
# - Чтобы максимизировать количество пересечений, нужно, чтобы новая хорда пересекала все M хорд.
#
# Значит, максимальное количество пересечений = M (пересечения новой хорды с каждой из M выбранных).
#
# Теперь нужно найти M — максимальное количество непересекающихся хорд.
#
# Как найти M?
# Отсортируем хорды по правому концу (b).
# Затем выберем жадно хорды, не пересекающиеся с уже выбранными.
#
# Проверка пересечения:
# Хорды (a,b) и (c,d) не пересекаются, если один из интервалов полностью лежит вне другого.
# Но на круге, с упорядочиванием по a < b, и сортировкой по b, жадный алгоритм работает.
#
# После нахождения M, ответ = M + (M - 1) = 2M - 1, если мы можем добавить хорду, пересекающую все выбранные.
# Но в условии сказано, что новая хорда может быть добавлена свободно, концы не обязательно из 1..2N.
#
# Однако, в примерах ответ равен M + (M - 1) = 2M - 1?
# Проверим на примерах:
# Пример 1:
# N=3
# Хорды: (1,5), (3,6), (2,4)
# Максимальное непересекающееся множество: например, (1,5) и (2,4) пересекаются? Да, (1,5) и (2,4) пересекаются.
# Проверим:
# (1,5) и (2,4): 1<2<5<4? Нет, 4<5, так что нет.
# Но 4<5, значит (2,4) внутри (1,5), значит они пересекаются.
# Значит максимальное непересекающееся множество — это 2 хорды.
# Ответ в примере 2.
#
# В примере 3:
# Хорды: (1,2), (3,4), (5,6)
# Все не пересекаются, M=3
# Ответ 2 в примере, значит не 2M-1.
#
# Значит, ответ — M + (M - 1) = 2M - 1 не подходит.
#
# Пересчитаем:
# После выбора M непересекающихся хорд, количество пересечений между ними 0.
# Добавляем одну хорду, которая может пересекать максимум M хорд.
# Пересечения между хордами — это количество пар пересекающихся хорд.
# После добавления новой хорды, количество пересечений = количество пересечений между выбранными (0) + количество пересечений новой хорды с выбранными (до M).
#
# Значит максимум — M.
#
# Но в примерах:
# Пример 1: ответ 2, M=2
# Пример 2: ответ 4, M=4
# Пример 3: ответ 2, M=3, но ответ 2, меньше M=3.
#
# Значит, в примере 3 новая хорда может пересекать не более 2 хорд.
#
# Значит, нужно найти M — максимальное количество непересекающихся хорд,
# и максимальное количество хорд, которые может пересечь новая хорда.
#
# Новая хорда может быть добавлена произвольно, концы не обязательно из 1..2N.
# Значит, новая хорда может быть выбрана так, чтобы пересекать максимальное количество выбранных хорд.
#
# Следовательно, ответ = максимальное количество пересечений между выбранными хордами + максимальное количество пересечений новой хорды с выбранными.
#
# Но выбранные хорды не пересекаются, значит пересечений между ними 0.
#
# Значит ответ = максимальное количество хорд, которые может пересечь новая хорда.
#
# Теперь задача сводится к:
# - Найти максимальное по мощности множество непересекающихся хорд (M).
# - Найти максимальное количество хорд из этого множества, которые можно пересечь одной новой хордой.
#
# Как найти максимальное количество хорд, пересекаемых одной хордаой?
#
# Рассмотрим выбранные непересекающиеся хорды.
# Каждая хорда — интервал (a,b) на круге.
# Новая хорда — (x,y), где x,y — точки на круге (не обязательно из 1..2N).
#
# Хорды (a,b) и (x,y) пересекаются, если концы новой хорды разделяют концы старой хорды.
#
# Для множества непересекающихся хорд, они упорядочены по возрастанию a и b.
#
# Можно показать, что максимальное количество пересечений новой хорды с выбранными — это максимальное количество хорд, которые "перекрываются" некоторым отрезком.
#
# Значит, нужно найти максимальное количество хорд, которые пересекает одна хорда.
#
# Для этого:
# - Рассмотрим все концы выбранных хорд.
# - Для каждой пары концов (p,q), p<q, хорда (p,q) пересекает все хорды, у которых один конец в (p,q), а другой вне (p,q).
#
# Но перебор всех пар невозможен (O(M^2)).
#
# Решение:
# - Отсортируем выбранные хорды по a.
# - Для каждой хорды (a,b), она "перекрывает" точки от a до b.
# - Новая хорда (x,y) пересекает хорду (a,b), если (a,b) "перекрывает" точку x, а другая точка y вне (a,b), или наоборот.
#
# Можно показать, что максимальное количество пересечений новой хорды с выбранными равно максимальному числу хорд, которые "перекрывают" некоторую точку.
#
# Значит, нужно найти точку на круге, которая лежит внутри максимального количества выбранных хорд.
#
# Для этого:
# - Для выбранных хорд (a,b), отметим +1 в a, -1 в b (по кругу).
# - Найдем точку с максимальным покрытием.
#
# Но круг, точки 1..2N.
#
# Реализуем:
# - Для выбранных хорд (a,b), a<b
# - Создадим массив длины 2N+1, для подсчёта покрытия.
# - Для каждой хорды: coverage[a] += 1, coverage[b] -= 1
# - Просчитаем префиксные суммы по кругу (с учётом цикличности).
#
# Максимальное значение префиксной суммы — максимальное количество хорд, покрывающих точку.
#
# Тогда ответ = M + max_coverage - 1
# Почему -1? Потому что новая хорда пересекает только те хорды, которые "перекрывают" точку, но сама новая хорда не пересекается с собой.
#
# Проверим на примерах:
# Пример 1:
# M=2
# max_coverage=2
# Ответ=2+2-1=3, но в примере ответ 2.
#
# Значит, нужно проверить логику.
#
# Возможно, ответ = max_coverage + (M - 1)
# Потому что:
# - Пересечения между выбранными хордами = 0 (они не пересекаются)
# - Новая хорда пересекает max_coverage выбранных хорд
# - Но пересечения между выбранными хордами = 0
# - Пересечения между новой и выбранными = max_coverage
#
# Значит ответ = max_coverage
#
# Но в примере 2:
# M=4
# max_coverage=2 (?)
# Ответ 4 в примере.
#
# Значит, в примерах максимальное количество пересечений равно количеству выбранных хорд.
#
# Итог:
# Максимальное количество пересечений = M + (M - 1) = 2M - 1
#
# Но в примерах 1 и 3 ответ равен M.
#
# В условии сказано, что новая хорда может быть добавлена произвольно, концы не обязательно из 1..2N.
#
# Значит, новая хорда может пересекать максимум M хорд.
#
# Пересечения между выбранными хордами = 0 (они не пересекаются)
#
# Значит ответ = M (пересечения новой хорды с выбранными)
#
# Но в примере 2 ответ 4, а M=4, совпадает.
#
# В примере 3:
# Хорды (1,2), (3,4), (5,6) — все не пересекаются, M=3
# Ответ 2, меньше M=3
#
# Значит, новая хорда не может пересекать все 3 хорд.
#
# Значит, нужно найти максимальное количество хорд, пересекаемых одной хордаой.
#
# Решение:
# - Найти максимальное множество непересекающихся хорд (M)
# - Среди них найти максимальное количество хорд, пересекаемых одной хордаой.
#
# Для этого:
# - Отсортируем выбранные хорды по a.
# - Для каждой хорды (a,b), она задаёт интервал [a,b].
# - Новая хорда (x,y) пересекает хорду (a,b), если x и y лежат по разные стороны от (a,b).
#
# Значит, новая хорда должна "разрезать" множество выбранных хорд.
#
# Максимальное количество пересечений новой хорды с выбранными равно максимальному количеству хорд, которые "перекрывают" некоторую точку.
#
# Поэтому:
# - Для выбранных хорд (a,b), a<b
# - Создадим массив длины 2N+1, coverage
# - coverage[a] += 1
# - coverage[b] -= 1
# - Просчитаем префиксные суммы по кругу
#
# Максимальное значение coverage — максимальное количество хорд, покрывающих точку.
#
# Тогда ответ = M + max_coverage - 1
#
# Проверим на примерах:
# Пример 1:
# M=2
# max_coverage=2
# Ответ=2+2-1=3, но в примере ответ 2.
#
# Значит, нужно брать максимум между M и max_coverage
#
# В примере 3:
# M=3
# max_coverage=1 (?)
# Ответ=2
#
# Значит, ответ = max(M, max_coverage)
#
# Итог:
# Ответ = max(M, max_coverage)
#
# Реализуем.

# 1) Найдём M — максимальное количество непересекающихся хорд
chords.sort(key=lambda x: x[1])
res = []
last = 0
for a, b in chords:
    if a > last:
        res.append((a, b))
        last = b
M = len(res)

# 2) Найдём max_coverage
# coverage по точкам 1..2N
coverage = [0] * (2 * N + 2)
for a, b in res:
    coverage[a] += 1
    coverage[b] -= 1

max_cov = 0
cur = 0
for i in range(1, 2 * N + 1):
    cur += coverage[i]
    if cur > max_cov:
        max_cov = cur

print(max(M, max_cov))