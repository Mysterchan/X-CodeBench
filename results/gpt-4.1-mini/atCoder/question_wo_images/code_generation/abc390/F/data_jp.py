import sys
sys.setrecursionlimit(10**7)
input = sys.stdin.readline

N = int(input())
A = list(map(int, input().split()))

# f(L,R) は区間 [L,R] の整数列に対して、
# 「黒板に書かれた整数が全て消えるまでに必要な操作回数の最小値」
# 操作は、黒板に書かれた整数の中で連続した整数区間 [l,r] を選び、
# その区間に含まれるすべての整数を黒板から消す。
#
# つまり、f(L,R) は区間 [L,R] の A の値の「整数の連続区間をいくつに分割できるか」の最小値。
#
# 重要なことは、操作で消す区間 [l,r] は「黒板に書かれた整数が全て1つ以上存在する連続した整数区間」であること。
# つまり、操作で消す整数の値の区間は連続していなければならない。
#
# これを踏まえると、f(L,R) は区間 [L,R] の A の値の「値の区間を連続区間に分割する最小個数」となる。
#
# ここで、A_i の値は 1 ≤ A_i ≤ N である。
#
# さらに、f(L,R) は区間 [L,R] の A の値の「値の区間の最小分割数」。
#
# これを効率的に求めるには、区間 [L,R] の A の値の最小値と最大値を考える。
# もし区間 [L,R] の値の最大値 - 最小値 + 1 = R - L + 1 ならば、
# その区間の値は連続している（重複がなければ）ので f(L,R) = 1。
#
# しかし重複がある場合は、1回で消せない。
#
# ここで、問題の操作は「黒板に書かれた整数の値の連続区間を一括で消す」ことなので、
# f(L,R) は区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# つまり、区間 [L,R] の A の値を「値の連続区間」に分割する最小個数。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の分割点」を見つける必要がある。
#
# しかし、N が 3*10^5 と大きいため、全区間を直接計算するのは不可能。
#
# そこで、問題の本質を考える。
#
# 1. f(L,R) は区間 [L,R] の A の値の「値の連続区間の最小分割数」。
# 2. 1回の操作で消せるのは、黒板に書かれた整数の値の連続区間。
#
# つまり、f(L,R) は区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の最小値を mn、最大値を mx とすると、
# もし mx - mn + 1 = R - L + 1 かつ A_L,...,A_R の値に重複がなければ f(L,R) = 1。
#
# そうでなければ、f(L,R) > 1。
#
# さらに、f(L,R) は区間 [L,R] の A の値の「値の連続区間の最小分割数」なので、
# f(L,R) = 1 + min_{L ≤ k < R} (f(L,k) + f(k+1,R)) となる。
#
# しかし、これは O(N^3) で計算できない。
#
# ここで、問題の操作は「値の連続区間を一括で消す」ことなので、
# f(L,R) は区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを別の視点で考える。
#
# 1回の操作で消せるのは、黒板に書かれた整数の値の連続区間。
# つまり、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」を求める必要がある。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# つまり、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# ここで、区間 [L,R] の A の値の「値の連続区間の最小分割数」は、
# 区間 [L,R] の A の値の「値の連続区間の最小分割数」。
#
# これを求めるには、区間 [L,R] の A の値