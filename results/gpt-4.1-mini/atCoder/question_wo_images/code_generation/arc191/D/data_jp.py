import sys
from collections import deque

def main():
    input = sys.stdin.readline
    N, M, S, T = map(int, input().split())
    graph = [[] for _ in range(N+1)]
    for _ in range(M):
        u, v = map(int, input().split())
        graph[u].append(v)
        graph[v].append(u)

    # 状態は (posA, posB)
    # 初期状態 (S, T)
    # 目標状態 (T, S)
    # 移動はAかBのどちらかを隣接頂点に移動させる。ただし移動後に同じ頂点になってはいけない。

    # BFSで最短手数を求める
    # 状態空間は最大 N*N = 4*10^10 で大きすぎるため、
    # 直接全状態を管理するのは不可能。
    #
    # しかし、グラフは連結で単純無向グラフ。
    # ここで、2つのコマが同じ頂点に来てはいけない制約がある。
    #
    # 2つのコマの位置を状態とする双方向BFSを行うのはメモリ的に厳しい。
    #
    # しかし、問題は「コマAがSからTへ、コマBがTからSへ入れ替わる」こと。
    #
    # 重要な観察:
    # 2つのコマが同じ頂点に来てはいけないので、2つのコマは常に異なる頂点にいる。
    #
    # ここで、2つのコマの位置を状態としたグラフを考えると、
    # 状態数は最大 N*(N-1) ≈ 4*10^10で大きすぎる。
    #
    # しかし、問題の制約は「単純連結無向グラフ」であり、
    # 2つのコマが同じ頂点に来てはいけない。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # 解法:
    # 2つのコマの位置を状態とし、BFSで最短距離を求める。
    # ただし、Nが最大20万なので全状態を管理できない。
    #
    # しかし、問題の制約は「単純連結無向グラフ」であり、
    # 2つのコマが同じ頂点に来てはいけない。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # 解法:
    # 2つのコマの位置を状態とし、BFSで最短距離を求める。
    # ただし、Nが最大20万なので全状態を管理できない。
    #
    # しかし、問題の制約は「単純連結無向グラフ」であり、
    # 2つのコマが同じ頂点に来てはいけない。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。
    #
    # これをBFSで解くには工夫が必要。
    #
    # ここで、2つのコマの位置を状態としたグラフの辺は、
    # AかBのどちらかを1歩動かすことで遷移する。