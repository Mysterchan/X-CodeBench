Let me trace through this code step by step.

**Initial Setup:**
- `n = 4`
- `P = [0, 0, 1, 0]` (after subtracting 1 from each: [1-1, 1-1, 2-1, 1-1])
- `SL = SortedList([0, 1, 2, 3])`
- `A = [0, 0, 0, 0]`

**Processing (in reverse order, i from 3 down to 0):**

**i = 3:**
- `p = P[3] = 0`
- `s = SL.pop(0) = 0` (removes first element)
- `A[0] = 3+1 = 4`
- `SL = [1, 2, 3]`
- `A = [4, 0, 0, 0]`

**i = 2:**
- `p = P[2] = 1`
- `s = SL.pop(1) = 2` (removes second element)
- `A[2] = 2+1 = 3`
- `SL = [1, 3]`
- `A = [4, 0, 3, 0]`

**i = 1:**
- `p = P[1] = 0`
- `s = SL.pop(0) = 1` (removes first element)
- `A[1] = 1+1 = 2`
- `SL = [3]`
- `A = [4, 2, 3, 0]`

**i = 0:**
- `p = P[0] = 0`
- `s = SL.pop(0) = 3` (removes first element)
- `A[3] = 0+1 = 1`
- `SL = []`
- `A = [4, 2, 3, 1]`

**Output:**
`print(*A)` prints the elements of A separated by spaces.

4 2 3 1