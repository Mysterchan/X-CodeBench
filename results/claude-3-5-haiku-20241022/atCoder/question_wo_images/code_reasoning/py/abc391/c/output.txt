I need to trace through this code step by step.

Initial setup:
- N = 4, Q = 7
- `place = [0, 1, 2, 3]` (pigeon i is at nest i, 0-indexed)
- `cnt = [1, 1, 1, 1]` (each nest has 1 pigeon)
- `ans = 0` (no nests with >1 pigeon)

**Query 1: `2`**
- Type 2: print `ans`
- Output: `0`

**Query 2: `1 1 2`**
- Type 1: Move pigeon 1 to nest 2
- `p = 0` (pigeon 1, 0-indexed)
- `h = 1` (nest 2, 0-indexed)
- `old_h = place[0] = 0` (pigeon 1 was at nest 0)
- `place[0] = 1` (pigeon 1 now at nest 1)
- Check old nest: `cnt[0] = 1`, not 2, so no change to `ans`
- `cnt[0] = 0` (nest 0 now has 0 pigeons)
- Check new nest: `cnt[1] = 1`, so `ans += 1` → `ans = 1`
- `cnt[1] = 2` (nest 1 now has 2 pigeons)

**Query 3: `2`**
- Type 2: print `ans`
- Output: `1`

**Query 4: `1 3 2`**
- Type 1: Move pigeon 3 to nest 2
- `p = 2` (pigeon 3, 0-indexed)
- `h = 1` (nest 2, 0-indexed)
- `old_h = place[2] = 2` (pigeon 3 was at nest 2)
- `place[2] = 1` (pigeon 3 now at nest 1)
- Check old nest: `cnt[2] = 1`, not 2, so no change to `ans`
- `cnt[2] = 0` (nest 2 now has 0 pigeons)
- Check new nest: `cnt[1] = 2`, not 1, so no change to `ans`
- `cnt[1] = 3` (nest 1 now has 3 pigeons)

**Query 5: `2`**
- Type 2: print `ans`
- Output: `1`

**Query 6: `1 3 4`**
- Type 1: Move pigeon 3 to nest 4
- `p = 2` (pigeon 3, 0-indexed)
- `h = 3` (nest 4, 0-indexed)
- `old_h = place[2] = 1` (pigeon 3 was at nest 1)
- `place[2] = 3` (pigeon 3 now at nest 3)
- Check old nest: `cnt[1] = 3`, not 2, so no change to `ans`
- `cnt[1] = 2` (nest 1 now has 2 pigeons)
- Check new nest: `cnt[3] = 1`, so `ans += 1` → `ans = 2`
- `cnt[3] = 2` (nest 3 now has 2 pigeons)

**Query 7: `2`**
- Type 2: print `ans`
- Output: `2`

0
1
1
2