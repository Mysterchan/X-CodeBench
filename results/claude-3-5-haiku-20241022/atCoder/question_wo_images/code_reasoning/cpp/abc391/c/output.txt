I need to trace through the execution of this C++ program step by step.

**Initial Setup:**
- N = 4, Q = 7
- `c[i]` tracks which nest pigeon i is in
- `cnt[i]` tracks how many pigeons are in nest i
- `ans` tracks the number of nests with more than one pigeon
- Initially: `c[1]=1, c[2]=2, c[3]=3, c[4]=4` and `cnt[1]=1, cnt[2]=1, cnt[3]=1, cnt[4]=1`
- `ans = 0`

**Query 1: `2`**
- Output `ans` = 0

**Query 2: `1 1 2`**
- Move pigeon 1 to nest 2
- Current state before: pigeon 1 is in nest `c[1]=1`, nest 2 has `cnt[2]=1` pigeon
- `if(cnt[h]==1)`: `cnt[2]==1` is true, so `ans++` → `ans = 1`
- `if(cnt[c[p]]==2)`: `cnt[c[1]]==cnt[1]==1` is false, so no change
- `cnt[h]++`: `cnt[2]++` → `cnt[2] = 2`
- `cnt[c[p]]--`: `cnt[1]--` → `cnt[1] = 0`
- `c[p]=h`: `c[1] = 2`

**Query 3: `2`**
- Output `ans` = 1

**Query 4: `1 3 2`**
- Move pigeon 3 to nest 2
- Current state before: pigeon 3 is in nest `c[3]=3`, nest 2 has `cnt[2]=2` pigeons
- `if(cnt[h]==1)`: `cnt[2]==2` is false, so no change
- `if(cnt[c[p]]==2)`: `cnt[c[3]]==cnt[3]==1` is false, so no change
- `cnt[h]++`: `cnt[2]++` → `cnt[2] = 3`
- `cnt[c[p]]--`: `cnt[3]--` → `cnt[3] = 0`
- `c[p]=h`: `c[3] = 2`

**Query 5: `2`**
- Output `ans` = 1

**Query 6: `1 3 4`**
- Move pigeon 3 to nest 4
- Current state before: pigeon 3 is in nest `c[3]=2`, nest 4 has `cnt[4]=1` pigeon
- `if(cnt[h]==1)`: `cnt[4]==1` is true, so `ans++` → `ans = 2`
- `if(cnt[c[p]]==2)`: `cnt[c[3]]==cnt[2]==3` is false, so no change
- `cnt[h]++`: `cnt[4]++` → `cnt[4] = 2`
- `cnt[c[p]]--`: `cnt[2]--` → `cnt[2] = 2`
- `c[p]=h`: `c[3] = 4`

**Query 7: `2`**
- Output `ans` = 2

0
1
1
2